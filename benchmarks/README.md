# Granian benchmarks

Run at: 2022-07-12T23:11:55.158811

CPUs: 4

## RSGI response types

| Type | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| bytes small (c256) | 1470494 | 97995 | 3.336ms | 136.868ms |
| str small (c256) | 1465191 | 97028 | 3.564ms | 134.463ms |
| bytes big (c256) | 31868 | 2115 | 120.46ms | 178.395ms |
| str big (c128) | 599166 | 39820 | 12.925ms | 250.253ms |

## RSGI vs ASGI

| Request | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| RSGI bytes (c256) | 1469074 | 97282 | 3.351ms | 134.211ms |
| RSGI str (c256) | 1415733 | 94315 | 3.818ms | 131.74ms |
| ASGI bytes (c256) | 910494 | 60291 | 5.322ms | 139.992ms |
| ASGI str (c256) | 908748 | 60175 | 5.49ms | 149.642ms |

## vs Uvicorn

| Mode | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| Granian ASGI (c256) | 978803 | 65144 | 4.854ms | 141.828ms |
| Granian RSGI (c256) | 1498377 | 99198 | 3.184ms | 135.842ms |
| Uvicorn H11 (c256) | 299669 | 19847 | 12.904ms | 33.682ms |
| Uvicorn http-tools (c128) | 1031323 | 68278 | 1.926ms | 42.351ms |

## Threading

### ASGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c32)  | 1 | 1 | 236910 | 15772 | 2.012ms | 5.741ms |
| workers (c32)  | 1 | 1 | 231489 | 15413 | 2.059ms | 9.089ms |
| runtime (c128) | 1 | 2 | 225755 | 14944 | 8.504ms | 24.787ms |
| workers (c256) | 1 | 2 | 234738 | 15631 | 16.35ms | 45.147ms |
| runtime (c256) | 1 | 4 | 270483 | 18012 | 14.215ms | 63.217ms |
| workers (c256) | 1 | 4 | 266135 | 17719 | 14.562ms | 49.27ms |
| runtime (c256) | 1 | 5 | 281228 | 18616 | 13.737ms | 59.342ms |
| workers (c256) | 1 | 5 | 268652 | 17891 | 14.653ms | 69.901ms |
| runtime (c256) | 1 | 8 | 287616 | 19148 | 13.498ms | 62.079ms |
| workers (c256) | 1 | 8 | 262443 | 17375 | 15.513ms | 68.413ms |
| runtime (c256) | 2 | 1 | 284691 | 18951 | 13.468ms | 29.679ms |
| workers (c256) | 2 | 1 | 304684 | 20284 | 12.573ms | 23.1ms |
| runtime (c128) | 2 | 2 | 339293 | 22599 | 5.655ms | 20.721ms |
| workers (c128) | 2 | 2 | 347733 | 23023 | 5.773ms | 36.03ms |
| runtime (c256) | 2 | 4 | 383112 | 25515 | 10.155ms | 53.552ms |
| workers (c256) | 2 | 4 | 393167 | 26032 | 10.499ms | 62.665ms |
| runtime (c256) | 2 | 5 | 391947 | 26100 | 9.937ms | 45.615ms |
| workers (c256) | 2 | 5 | 377015 | 25107 | 10.441ms | 59.63ms |
| runtime (c256) | 2 | 8 | 407901 | 27160 | 9.448ms | 45.282ms |
| workers (c256) | 2 | 8 | 395927 | 26215 | 10.83ms | 89.313ms |
| runtime (c256) | 4 | 1 | 842988 | 56174 | 4.924ms | 93.925ms |
| workers (c64)  | 4 | 1 | 768797 | 50911 | 1.328ms | 32.87ms |
| runtime (c256) | 4 | 2 | 966408 | 64370 | 5.04ms | 177.012ms |
| workers (c256) | 4 | 2 | 584327 | 38694 | 7.162ms | 45.674ms |
| runtime (c128) | 4 | 4 | 810188 | 53653 | 2.522ms | 132.388ms |
| workers (c128) | 4 | 4 | 718257 | 47564 | 5.815ms | 140.114ms |
| runtime (c256) | 4 | 5 | 901468 | 59690 | 4.251ms | 132.496ms |
| workers (c128) | 4 | 5 | 631413 | 41813 | 4.215ms | 66.318ms |
| runtime (c128) | 4 | 8 | 798002 | 52840 | 2.484ms | 28.057ms |
| workers (c256) | 4 | 8 | 775103 | 51326 | 8.072ms | 139.726ms |
| runtime (c256) | 5 | 1 | 728115 | 48218 | 8.132ms | 120.792ms |
| workers (c256) | 5 | 1 | 793428 | 52862 | 7.622ms | 127.532ms |
| runtime (c256) | 5 | 2 | 963803 | 64222 | 5.529ms | 246.473ms |
| workers (c256) | 5 | 2 | 801449 | 53074 | 19.441ms | 195.043ms |
| runtime (c256) | 5 | 4 | 804936 | 53306 | 9.126ms | 222.922ms |
| workers (c256) | 5 | 4 | 744894 | 49651 | 13.382ms | 252.593ms |
| runtime (c256) | 5 | 5 | 833217 | 55168 | 8.24ms | 140.847ms |
| workers (c256) | 5 | 5 | 873936 | 57863 | 13.437ms | 171.678ms |
| runtime (c256) | 5 | 8 | 845103 | 56232 | 4.515ms | 31.819ms |
| workers (c128) | 5 | 8 | 724475 | 47979 | 8.579ms | 135.633ms |

### RSGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c128) | 1 | 1 | 355543 | 23681 | 5.387ms | 11.626ms |
| workers (c32)  | 1 | 1 | 363389 | 24212 | 1.304ms | 4.694ms |
| runtime (c256) | 1 | 2 | 356657 | 23752 | 10.746ms | 25.942ms |
| workers (c256) | 1 | 2 | 350560 | 23349 | 11.014ms | 39.557ms |
| runtime (c256) | 1 | 4 | 401536 | 26751 | 9.584ms | 31.76ms |
| workers (c256) | 1 | 4 | 415712 | 27693 | 9.309ms | 36.276ms |
| runtime (c256) | 1 | 5 | 433925 | 28907 | 8.906ms | 35.024ms |
| workers (c256) | 1 | 5 | 458227 | 30526 | 8.56ms | 48.299ms |
| runtime (c256) | 1 | 8 | 514135 | 34038 | 7.588ms | 35.081ms |
| workers (c256) | 1 | 8 | 481575 | 31885 | 8.95ms | 47.204ms |
| runtime (c256) | 2 | 1 | 485872 | 32362 | 7.878ms | 22.125ms |
| workers (c128) | 2 | 1 | 524394 | 34932 | 3.65ms | 17.157ms |
| runtime (c256) | 2 | 2 | 881935 | 58757 | 4.363ms | 23.288ms |
| workers (c256) | 2 | 2 | 884214 | 58543 | 4.574ms | 36.784ms |
| runtime (c256) | 2 | 4 | 1033742 | 68860 | 3.695ms | 18.149ms |
| workers (c256) | 2 | 4 | 968008 | 64100 | 4.537ms | 41.124ms |
| runtime (c256) | 2 | 5 | 1046851 | 69721 | 3.642ms | 19.526ms |
| workers (c256) | 2 | 5 | 941770 | 62362 | 4.796ms | 59.217ms |
| runtime (c256) | 2 | 8 | 963985 | 64210 | 3.996ms | 25.252ms |
| workers (c256) | 2 | 8 | 941046 | 62305 | 4.87ms | 65.444ms |
| runtime (c256) | 4 | 1 | 1267597 | 83945 | 3.742ms | 33.377ms |
| workers (c256) | 4 | 1 | 1305343 | 86984 | 3.5ms | 29.251ms |
| runtime (c256) | 4 | 2 | 1458172 | 96548 | 3.265ms | 137.586ms |
| workers (c128) | 4 | 2 | 1111120 | 73585 | 3.679ms | 128.958ms |
| runtime (c256) | 4 | 4 | 1252459 | 83400 | 4.69ms | 133.364ms |
| workers (c256) | 4 | 4 | 1164227 | 77093 | 4.908ms | 131.683ms |
| runtime (c256) | 4 | 5 | 1223290 | 81424 | 3.96ms | 129.019ms |
| workers (c256) | 4 | 5 | 1226381 | 81204 | 4.126ms | 123.44ms |
| runtime (c256) | 4 | 8 | 1225361 | 81304 | 5.162ms | 129.345ms |
| workers (c256) | 4 | 8 | 1213210 | 80592 | 4.993ms | 130.174ms |
| runtime (c256) | 5 | 1 | 1146262 | 75908 | 5.179ms | 95.814ms |
| workers (c256) | 5 | 1 | 1128513 | 74726 | 5.247ms | 93.434ms |
| runtime (c256) | 5 | 2 | 1298333 | 86101 | 13.644ms | 252.024ms |
| workers (c256) | 5 | 2 | 1091667 | 72582 | 16.71ms | 181.394ms |
| runtime (c256) | 5 | 4 | 1193949 | 79148 | 14.655ms | 250.367ms |
| workers (c256) | 5 | 4 | 1083382 | 71767 | 16.66ms | 258.824ms |
| runtime (c128) | 5 | 5 | 1188659 | 78700 | 1.97ms | 106.034ms |
| workers (c256) | 5 | 5 | 1043093 | 69084 | 15.001ms | 254.537ms |
| runtime (c256) | 5 | 8 | 1109510 | 73834 | 7.405ms | 137.357ms |
| workers (c256) | 5 | 8 | 1101309 | 72995 | 17.613ms | 258.348ms |
